; Basic macro test

(macro if2 (c a b) env
    (cond
        (#(env c) #(env a))
        (true     #(stringize c))
        ;(true     "FAIL")
        ;(true     #(env b))
))

(macro if3 (c a b) env
    (cond
        (#(env c) (begin
            (puts "Cond was true" (stringize c))
            #(env a)))
        (true     (begin
            (puts "Cond was false")
            #(env b)))
))

(func main ():int
    (var x 4:int)
    (var y 4:int)
    (var z 7:int)
            
    (puts (if2 (eq? x y) "true" "false"))
    (puts (if2 (eq? x z) "true" "false"))
    0)
